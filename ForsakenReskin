local plr = game.Players.LocalPlayer
local char = plr.Character or plr.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")
local gui = game:GetService("StarterGui")

local anims = {
    "rbxassetid://83465205704188",
    "rbxassetid://109700476007435",
    "rbxassetid://117451341682452"
}

local playing = false
for _, a in pairs(hum:GetPlayingAnimationTracks()) do
    for _, id in pairs(anims) do
        if string.find(a.Animation.AnimationId, id) then
            playing = true
        end
    end
end

if not playing then
    gui:SetCore("SendNotification", {Title="Not Killer", Text="be killer noli lol", Duration=6})
    return
end

local cleanups = {}

local noli = workspace.Players.Killers:FindFirstChild("Noli")
if noli then
    local nested = noli:FindFirstChild("Noli")
    if nested then nested:Destroy() end

    local head = noli:FindFirstChild("Head")
    if head then
        head.Transparency = 0
        head.BrickColor = BrickColor.White()
        local f = head:FindFirstChildOfClass("Decal") or Instance.new("Decal")
        f.Name = "face"
        f.Texture = "http://www.roblox.com/asset/?id=35397044"
        f.Face = Enum.NormalId.Front
        f.Parent = head
    end

    local torso = noli:FindFirstChild("Torso")
    if torso then
        torso.Transparency = 0
        local s = torso:FindFirstChildOfClass("Shirt") or Instance.new("Shirt")
        s.ShirtTemplate = "http://www.roblox.com/asset/?id=121182451132659"
        s.Parent = noli
    end

    local parts = {"Left Arm","Right Arm","Left Leg","Right Leg"}
    for _, p in pairs(parts) do
        local part = noli:FindFirstChild(p)
        if part then
            part.Transparency = 0
            if p == "Left Arm" or p == "Right Arm" then
                part.BrickColor = BrickColor.White()
            end
        end
    end

    local crown = noli:FindFirstChild("VoidstarCrown")
    if crown then
        crown.MeshId = "http://www.roblox.com/asset/?id=1278979"
        crown.TextureID = "http://www.roblox.com/asset/?id=190240677"
        local sa = crown:FindFirstChildOfClass("SurfaceAppearance")
        if sa then sa:Destroy() end
    end

    for _, o in pairs(noli:GetDescendants()) do
        if o:IsA("ParticleEmitter") then
            o.Color = ColorSequence.new(Color3.new(1,1,1))
        elseif o:IsA("Trail") then
            o.Color = ColorSequence.new(Color3.new(0.7,0.7,0.7))
        elseif o:IsA("PointLight") or o:IsA("SpotLight") or o:IsA("SurfaceLight") then
            o.Color = Color3.new(1,1,1)
        end
    end
end

local hl = Instance.new("Highlight")
hl.Adornee = char
hl.FillColor = Color3.new(1,1,1)
hl.FillTransparency = 0.9
hl.OutlineColor = Color3.new(0,0,0)
hl.OutlineTransparency = 0
hl.Parent = char
table.insert(cleanups, hl)

spawn(function()
    while hum.Health > 0 do
        for _, t in pairs(hum:GetPlayingAnimationTracks()) do
            t:AdjustSpeed(0)
        end
        task.wait(0.1)
        for _, t in pairs(hum:GetPlayingAnimationTracks()) do
            t:AdjustSpeed(1)
        end
        task.wait(0.5)
    end
end)

local reps = {
    ["rbxassetid://84531768750039"] = "rbxassetid://113081858218471",
    ["rbxassetid://105569529052440"] = "rbxassetid://113081858218471",
    ["rbxassetid://92391154089183"] = "rbxassetid://113081858218471"
    -- real
}

local function repl(s)
    if s:IsA("Sound") then
        local id = s.SoundId
        if reps[id] then
            s.SoundId = reps[id]
        end
    end
end

for _, d in pairs(workspace:GetDescendants()) do
    repl(d)
end

local conn
conn = workspace.DescendantAdded:Connect(function(d)
    task.wait()
    repl(d)
end)
table.insert(cleanups, conn)

hum.Died:Connect(function()
    for _, c in pairs(cleanups) do
        if typeof(c) == "Instance" then
            c:Destroy()
        elseif typeof(c) == "RBXScriptConnection" then
            c:Disconnect()
        end
    end
end)
